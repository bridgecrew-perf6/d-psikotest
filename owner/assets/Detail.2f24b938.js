import{u as F,f as T,b as z,d as G,e as K,r as u,l as x,o as l,g as n,h as t,t as r,i,w as p,j as g,q as R,F as W,A as m,T as _,S as I,k as v}from"./index.04432143.js";import{B as J,a as L}from"./BreadCrumbSpace.32ca9e1b.js";import{B as M}from"./ButtonDel.ddf631ee.js";import{F as q}from"./vee-validate.esm.78bfd04a.js";const E={class:"pt-4 px-10 md:flex justify-between"},H={class:"text-2xl sm:text-3xl leading-none font-bold text-base-content shadow-sm"},U={class:"md:py-0 py-4"},Y=v(" Yayasan "),O=v(" Index "),Q={class:"pt-4 px-10 md:flex justify-between"},X=t("div",null,[t("span",{class:"text-2xl sm:text-3xl leading-none font-bold text-gray-700 shadow-sm"})],-1),Z={class:"md:py-0 py-2 space-x-2 space-y-2"},tt=t("button",{class:"btn hover:shadow-lg shadow text-white hover:text-gray-100 gap-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})]),v(" Kembali ")],-1),et=[tt],at={class:"px-4 py-4"},st={class:"w-full"},ot={class:"bg-white shadow rounded-lg px-0 py-0"},lt={class:"w-full lg:w-full mx-4"},nt={class:"p-0 sm:p-6 xl:p-8"},it={class:"pt-0 px-0"},dt={class:"w-full mx-0"},rt={class:"bg-white rounded-lg p-0 sm:p-6 xl:p-0"},ct={class:"grid md:grid-cols-2 gap-2"},ut=t("label",{for:"name",class:"text-sm font-medium text-gray-900 block mb-2"},"Pilih Sekolah",-1),mt={class:"text-xs text-red-600 mt-1"},_t=t("div",{class:"w-full flex justify-start mt-4 px-4"},[t("button",{class:"btn btn-active btn-lg btn-primary"}," Tambahkan ")],-1),ht={class:"md:py-2 px-4 lg:flex flex-wrap gap-4"},pt={class:"w-full lg:w-full"},wt={class:"bg-white shadow rounded-lg px-4 py-4"},xt={key:0},gt={key:0},vt={class:"text-sm font-medium text-center flex justify-center space-x-0"},yt=t("button",{class:"btn btn-sm btn-primary tooltip","data-tip":"Detail"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),bt={key:1},ft={class:"text-center"},kt={key:2},St={class:"text-center"},Dt={key:3},Bt={class:"text-center"},Ct={key:4},zt={__name:"Detail",setup(jt){const y=F();T(()=>y.getSekolah),y.$subscribe((e,s)=>{}),z().setPagesActive("yayasan");const D=G(),c=K().params.id,B=u([]),w=u([]),h=u([]);(async()=>{try{const e=await m.get(`owner/yayasan/${c}`);return w.value=e.data,e.data}catch(e){console.error(e)}})();const C=[{label:"No",field:"no",width:"50px",tdClass:"text-center",thClass:"text-center"},{label:"Actions",field:"actions",sortable:!1,width:"50px",tdClass:"text-center",thClass:"text-center"},{label:"Nama",field:"nama",type:"String"},{label:"Status",field:"status",type:"String"},{label:"Paket",field:"paket_nama",type:"String"},{label:"Jumlah Siswa",field:"jml_siswa",type:"String"},{label:"Jumlah Kelas",field:"jml_kelas",type:"String"}],b=async()=>{try{const e=await m.get(`owner/yayasan/${c}/detail`);return B.value=e.data,h.value=e.data,e.data}catch(e){console.error(e)}};b();let f=u([]);const d=u({label:"Pilih Sekolah",id:null}),k=async()=>{try{const e=await m.get(`owner/yayasan/${c}/detail/getsekolah`);return f.value=e.data.map((s,o)=>({label:s.nama,id:s.id})),e}catch(e){_.danger("Warning","Data Gagal dimuat"),console.error(e)}};k();const j=()=>{d.value.id?A():_.warning("Warning","Pilih Sekolah Terlebih Dahulu")},A=async e=>{let s={sekolah_id:d.value.id};try{const o=await m.post(`owner/yayasan/${c}/detail`,s);return _.success("Success","Data Berhasil diupdate!"),b(),k(),P(),o.data}catch(o){_.danger("Warning","Data gagal ditambahkan!"),console.error(o)}},P=()=>{d.value.id=null,d.value.label="Pilih Sekolah",w.value={sekolah_id:""}},$=async(e,s)=>{if(confirm("Apakah anda yakin menghapus data ini?"))try{const o=await m.delete(`owner/yayasan/${c}/detail/${e}`);return h.value.splice(s,1),_.success("Success","Data Berhasil dihapus!"),o.data}catch(o){console.error(o)}};return(e,s)=>{const o=x("v-select"),V=x("router-link"),N=x("vue-good-table");return l(),n(W,null,[t("div",E,[t("div",null,[t("span",H,r(w.value.nama),1)]),t("div",U,[i(J,null,{content:p(()=>[Y,i(L),O]),_:1})])]),t("div",Q,[X,t("div",Z,[t("span",{onClick:s[0]||(s[0]=a=>g(D).go(-1))},et)])]),t("div",at,[t("div",st,[t("div",ot,[t("div",lt,[t("div",nt,[i(g(q),{onSubmit:j},{default:p(({errors:a})=>[t("div",it,[t("div",dt,[t("div",rt,[t("div",ct,[t("div",null,[ut,i(o,{class:I(["py-2 px-3 w-72 mx-auto md:mx-0",{disabled:!1}]),options:g(f),modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=S=>d.value=S)},null,8,["options","modelValue"]),t("div",mt,r(a.sekolah_id),1)])]),_t])])])]),_:1})])])])])]),t("div",ht,[t("div",pt,[t("div",wt,[h.value?(l(),n("div",xt,[i(N,{columns:C,rows:h.value,"search-options":{enabled:!0},"pagination-options":{enabled:!0,perPageDropdown:[10,20,50]},styleClass:"vgt-table striped bordered condensed",class:"py-0"},{"table-row":p(a=>[a.column.field=="actions"?(l(),n("span",gt,[t("div",vt,[i(M,{onClick:S=>$(a.row.id,a.index)},null,8,["onClick"]),i(V,{to:{name:"AdminSekolahDetailDashboard",params:{id:a.row.id}}},{default:p(()=>[yt]),_:2},1032,["to"])])])):a.column.field=="no"?(l(),n("span",bt,[t("div",ft,r(a.index+1),1)])):a.column.field=="jml_siswa"?(l(),n("span",kt,[t("div",St,r(a.row.jml_siswa)+" Siswa",1)])):a.column.field=="jml_kelas"?(l(),n("span",Dt,[t("div",Bt,r(a.row.jml_siswa)+" Kelas",1)])):(l(),n("span",Ct,r(a.formattedRow[a.column.field]),1))]),_:1},8,["rows"])])):R("",!0)])])])],64)}}};export{zt as default};
